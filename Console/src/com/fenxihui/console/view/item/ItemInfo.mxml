<?xml version="1.0" encoding="utf-8"?>
<s:MXTreeItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
					  xmlns:s="library://ns.adobe.com/flex/spark"
					  xmlns:mx="library://ns.adobe.com/flex/mx"
					  xmlns:component="com.fenxihui.library.component.*"
					  width="100%" height="75" autoDrawBackground="true"
					  dataChange="dataChangeHandler(event)" xmlns:component1="com.fenxihui.library.component.*">
	<s:layout>
		<s:VerticalLayout gap="0"/>
	</s:layout>
	<fx:Script>
		<![CDATA[
			import com.fenxihui.desktop.utils.Params;
			
			import mx.events.FlexEvent;
			
			//			[Embed(source='assets/category.gif')]
			//			[Bindable]
			//			private var iconClass:Class;

			public function setReaded(value:Boolean=true):void{
				if(value){
					if(data.@isread.toString()=="1"){
						var date:Date=new Date;
						var time:String=(date.month+1)+'-'+date.date+' '+date.hours+':'+date.minutes;
						data.@readtime=time;
						data.@isread=1;
					}
					lblTitle.setStyle('fontWeight','normal');
					lblReadTime.text=data.@readtime;
					lblReadTime.setStyle('fontWeight','normal');
					lblReadTime.setStyle('backgroundColor',0xeeddcc);
					lblOrderIndex.setStyle('color',0x666666);
					lblOrderIndex.setStyle('backgroundColor',0xeeddcc);
					lblOrderIndex.setStyle('color',0x666666);
				}else{
					lblTitle.setStyle('fontFamily','微软雅黑,黑体,宋体');
					lblTitle.setStyle('fontWeight','bold');
					lblReadTime.text='未读';
					lblReadTime.setStyle('fontWeight','bold');
					lblReadTime.setStyle('backgroundColor',0x336699);
					lblOrderIndex.setStyle('color',0xFFFFFF);
					lblOrderIndex.setStyle('backgroundColor',0x336699);
					lblOrderIndex.setStyle('color',0xFFFFFF);
				}
			}
			protected function dataChangeHandler(event:FlexEvent):void
			{
				if(data){
					switch(Params.infoType){
						case 'news':
							lblId.text=data.@aid;
							break;
						case 'thread':
							lblId.text=data.@tid;
							break;
					}
					lblTitle.text=data.@title;
					setReaded(data.@isread.toString()=="1");
					
					//icon.source=iconClass;
					lblSummary.text=data.@summary;
					lblDateline.text=data.@dateline;
					lblAuthor.text=data.@author;
					if(lblAuthor.text.length){
						lblAuthor.includeInLayout=lblAuthor.visible=true;
					}else{
						lblAuthor.includeInLayout=lblAuthor.visible=false;
					}
				}
			}
		]]>
	</fx:Script>
	<mx:HBox width="100%" height="25" horizontalAlign="left" paddingLeft="5" paddingRight="5"
			 verticalAlign="middle" verticalGap="0">
		<!--<s:Image id="icon" width="23" height="17" verticalCenter="0" visible="false"/>-->
		<component1:LabelBorder id="lblId" width="50" height="16" backgroundColor="0x999999"
							  color="0xFFFFFF" cornerRadius="8" paddingLeft="3" paddingRight="3"
							  paddingTop="2" textAlign="center" verticalAlign="middle"/>
		<s:Label id="lblTitle" width="100%" height="100%" fontSize="14"
				 fontStyle="normal" fontWeight="bold" maxDisplayedLines="1" showTruncationTip="true"
				 textAlign="left" textDecoration="none" verticalAlign="middle" verticalCenter="0"/>
		<component1:LabelBorder id="lblReadTime" height="17" backgroundColor="0x336699" color="0xFFFFFF"
							  cornerRadius="8" paddingLeft="3" paddingRight="3" textAlign="center"
							  verticalAlign="middle" text="未读"/>
	</mx:HBox>
	<mx:HBox width="100%" height="50" horizontalAlign="left" paddingLeft="5" paddingRight="5"
			 verticalAlign="top" verticalGap="0">
		<mx:Box width="50" height="50" horizontalAlign="center" verticalAlign="middle">
			<component1:LabelBorder id="lblOrderIndex" width="45" height="45" backgroundColor="0x336699" color="#FFFFFF"
								  cornerRadius="15" fontSize="20" fontWeight="bold" paddingLeft="3"
								  paddingRight="3" paddingTop="2" text="{itemIndex+1}"
								  textAlign="center" verticalAlign="middle"/>
		</mx:Box>
		<s:Label id="lblSummary" width="100%" height="45" lineBreak="toFit" lineHeight="16"
				 maxDisplayedLines="3" paddingTop="1" showTruncationTip="true" textAlign="left"
				 verticalCenter="0"/>
		<s:VGroup height="100%" horizontalAlign="center" verticalAlign="middle">
			<component1:LabelBorder id="lblDateline" height="17" backgroundColor="0x999999" color="0xFFFFFF"
								  cornerRadius="8" paddingLeft="3" paddingRight="3" paddingTop="2"
								  textAlign="center" verticalAlign="middle"/>
			<component1:LabelBorder id="lblAuthor" height="17" backgroundColor="0x999999" color="0xFFFFFF"
								  cornerRadius="8" paddingLeft="3" paddingRight="3" paddingTop="2"
								  textAlign="center" verticalAlign="middle"/>
		</s:VGroup>
	</mx:HBox>
</s:MXTreeItemRenderer>
